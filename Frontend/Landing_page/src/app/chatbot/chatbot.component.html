<!-- Chatbot Icon to toggle chat window -->
<div class="chatbot-icon" (click)="toggleChat()">
  <button type="button" aria-label="Open" class="css-15q8v64 e13411jb0">
    <img src="chatbot.svg" alt="Chatbot Icon" width="40" height="40">
  </button>
</div>

<!-- Chat Container -->
<div class="chat-container" [ngClass]="{ 'open': isChatOpen }">
  <div class="chat-header">
    <button class="close-btn" (click)="toggleChat()">âœ–</button>
    <h3>MyRnm Chatbot</h3>
  </div>

  <div class="chat-window">
    <!-- Messages Section -->
    <div *ngFor="let message of messages" class="message" [ngClass]="{
      'from-bot': message.sender === 'bot',
      'from-option': message.sender === 'option',
      'from-special-bot': message.isSpecial === true
    }">
      <div class="message-text">{{ message.text }}</div>
    </div>

    <!-- Loading Indicator -->
    <div *ngIf="isLoading" class="loading">Loading...</div>

    <!-- Predefined Options as Buttons -->
    <div *ngIf="isChatOpen && !isLoading && options.length > 0" class="button-container">
      <button *ngFor="let option of options" (click)="onOptionSelected(option)" id="btn-style">
        {{ option }}
      </button>
    </div>

    <!-- User Input Form -->
    <form [formGroup]="form" (ngSubmit)="sendMessage()" class="user-input-form" *ngIf="isChatOpen && !isLoading && !isOnPage">
      <input formControlName="message" placeholder="Type your message..." />
      <button type="submit">Send</button>
    </form>

    <!-- Go Back Button (when user navigates to another page) -->
    <button *ngIf="isOnPage" (click)="goBack()" class="go-back-btn">
      Go Back
    </button>
  </div>
</div>
